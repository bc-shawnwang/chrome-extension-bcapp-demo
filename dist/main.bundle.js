(()=>{"use strict";function t(t){const o=`; ${document.cookie}`.split(`; ${t}=`);if(2===o.length)return o.pop().split(";").shift()}function o(t){return JSON.stringify({line_items:[{quantity:1,product_id:t}]})}console.log("Hello from your zest extension!"),chrome.runtime.onMessage.addListener(((e,r,n)=>((async()=>{if("get-primary-cart"===e.action){let t=await(console.log("get primary cart"),fetch("/api/storefront/carts/",{method:"GET"})),o=await t.json();n(o)}if("create-primary-cart"===e.action){console.log("request to create cart",e.productId);let r=await async function(e){console.log("create primary cart");const r=await fetch("/api/storefront/cart",{headers:{"Content-Type":"application/json","x-xsrf-token":t("XSRF-TOKEN")},method:"POST",body:o(e)});return await r.json()}(e.productId);window.location.reload(),n(r)}})(),!0))),console.log("listener added")})();