(()=>{"use strict";function t(t){const e=`; ${document.cookie}`.split(`; ${t}=`);if(2===e.length)return e.pop().split(";").shift()}function e(t){return JSON.stringify({line_items:[{quantity:1,product_id:t}]})}const o={method:"DELETE",headers:{"Content-Type":"application/json","x-xsrf-token":t("XSRF-TOKEN")}};console.log("Hello from your zest extension!"),chrome.runtime.onMessage.addListener(((r,a,n)=>((async()=>{if("get-primary-cart"===r.action){let t=await(console.log("get primary cart"),fetch("/api/storefront/carts/",{method:"GET"})),e=await t.json();n(e)}if("create-primary-cart"===r.action){console.log("request to create cart",r.productId);let o=await async function(o){console.log("create primary cart");const r=await fetch("/api/storefront/cart",{headers:{"Content-Type":"application/json","x-xsrf-token":t("XSRF-TOKEN")},method:"POST",body:e(o)});return await r.json()}(r.productId);n(o)}if("delete-primary-cart"===r.action){console.log("request to delete cart",r.cartId);let t=await async function(t){return console.log("delete primary cart"),await fetch(`/api/storefront/carts/${t}`,o)}(r.cartId);n(t)}})(),!0))),console.log("listener added")})();